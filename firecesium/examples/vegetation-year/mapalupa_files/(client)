function buildImageUrl(a,b,c,d){var e,f=a._tileMatrixLabels,g=Cesium.defined(f)?f[d]:d.toString();if(a._url.indexOf("{")>=0)e=a._url.replace("{style}",a._style).replace("{Style}",a._style).replace("{TileMatrixSet}",a._tileMatrixSetID).replace("{TileMatrix}",g).replace("{TileRow}",c.toString()).replace("{TileCol}",b.toString());else{var h=new Cesium.Uri(a._url),i=Cesium.queryToObject(Cesium.defaultValue(h.query,""));i=Cesium.combine(defaultParameters,i),i.tilematrix=g,i.layer=a._layer,i.style=a._style,i.tilerow=c,i.tilecol=b,i.tilematrixset=a._tileMatrixSetID,i.format=a._format,h.query=Cesium.objectToQuery(i),e=h.toString()}var j=a._proxy;return Cesium.defined(j)&&(e=j.getURL(e)),e}!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.geojsonvt=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b,c,d,g,h,i,j){if(c/=b,d/=b,i>=c&&d>=j)return a;if(i>d||c>j)return null;for(var k=[],l=0;l<a.length;l++){var m,n,o=a[l],p=o.geometry,q=o.type;if(m=o.min[g],n=o.max[g],m>=c&&d>=n)k.push(o);else if(!(m>d||c>n)){var r=1===q?e(p,c,d,g):f(p,c,d,g,h,3===q);r.length&&k.push({geometry:r,type:q,tags:a[l].tags||null,min:o.min,max:o.max})}}return k.length?k:null}function e(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=g[d];h>=b&&c>=h&&e.push(g)}return e}function f(a,b,c,d,e,f){for(var h=[],i=0;i<a.length;i++){var j,k,l,m=0,n=0,o=null,p=a[i],q=p.area,r=p.dist,s=p.length,t=[];for(k=0;s-1>k;k++)j=o||p[k],o=p[k+1],m=n||j[d],n=o[d],b>m?n>c?(t.push(e(j,o,b),e(j,o,c)),f||(t=g(h,t,q,r))):n>=b&&t.push(e(j,o,b)):m>c?b>n?(t.push(e(j,o,c),e(j,o,b)),f||(t=g(h,t,q,r))):c>=n&&t.push(e(j,o,c)):(t.push(j),b>n?(t.push(e(j,o,b)),f||(t=g(h,t,q,r))):n>c&&(t.push(e(j,o,c)),f||(t=g(h,t,q,r))));j=p[s-1],m=j[d],m>=b&&c>=m&&t.push(j),l=t[t.length-1],f&&l&&(t[0][0]!==l[0]||t[0][1]!==l[1])&&t.push(t[0]),g(h,t,q,r)}return h}function g(a,b,c,d){return b.length&&(b.area=c,b.dist=d,a.push(b)),[]}b.exports=d},{}],2:[function(a,b,c){"use strict";function d(a,b){var c=[];if("FeatureCollection"===a.type)for(var d=0;d<a.features.length;d++)e(c,a.features[d],b);else"Feature"===a.type?e(c,a,b):e(c,{geometry:a},b);return c}function e(a,b,c){var d,i,j,k=b.geometry,l=k.type,m=k.coordinates,n=b.properties;if("Point"===l)a.push(f(n,1,[h(m)]));else if("MultiPoint"===l)a.push(f(n,1,g(m)));else if("LineString"===l)a.push(f(n,2,[g(m,c)]));else if("MultiLineString"===l||"Polygon"===l){for(j=[],d=0;d<m.length;d++)j.push(g(m[d],c));a.push(f(n,"Polygon"===l?3:2,j))}else if("MultiPolygon"===l){for(j=[],d=0;d<m.length;d++)for(i=0;i<m[d].length;i++)j.push(g(m[d][i],c));a.push(f(n,3,j))}else{if("GeometryCollection"!==l)throw new Error("Input data is not a valid GeoJSON object.");for(d=0;d<k.geometries.length;d++)e(a,{geometry:k.geometries[d],properties:n},c)}}function f(a,b,c){var d={geometry:c,type:b,tags:a||null,min:[2,1],max:[-1,0]};return j(d),d}function g(a,b){for(var c=[],d=0;d<a.length;d++)c.push(h(a[d]));return b&&(l(c,b),i(c)),c}function h(a){var b=a[0]/360+.5,c=a[1]/-180+.5;return c=0>c?0:c>1?1:c,[b,c,0]}function i(a){for(var b,c,d=0,e=0,f=0;f<a.length-1;f++)b=c||a[f],c=a[f+1],d+=b[0]*c[1]-c[0]*b[1],e+=Math.abs(c[0]-b[0])+Math.abs(c[1]-b[1]);a.area=Math.abs(d/2),a.dist=e}function j(a){var b=a.geometry,c=a.min,d=a.max;if(1===a.type)k(c,d,b);else for(var e=0;e<b.length;e++)k(c,d,b[e]);return a}function k(a,b,c){for(var d,e=0;e<c.length;e++)d=c[e],a[0]=Math.min(d[0],a[0]),b[0]=Math.max(d[0],b[0]),a[1]=Math.min(d[1],a[1]),b[1]=Math.max(d[1],b[1])}b.exports=d;var l=a("./simplify")},{"./simplify":4}],3:[function(a,b,c){"use strict";function d(a,b){return new e(a,b)}function e(a,b){b=this.options=i(Object.create(this.options),b);var c=b.debug;c&&console.time("preprocess data");var d=1<<b.maxZoom,e=k(a,b.tolerance/(d*b.extent));this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",b.indexMaxZoom,b.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e=n(e,b.buffer/b.extent,g),e.length&&this.splitTile(e,0,0,0),c&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function f(a,b,c){return 32*((1<<a)*c+b)+a}function g(a,b,c){return[c,(c-a[0])*(b[1]-a[1])/(b[0]-a[0])+a[1],1]}function h(a,b,c){return[(c-a[1])*(b[0]-a[0])/(b[1]-a[1])+a[0],c,1]}function i(a,b){for(var c in b)a[c]=b[c];return a}function j(a,b,c){var d=a.source;if(1!==d.length)return!1;var e=d[0];if(3!==e.type||e.geometry.length>1)return!1;var f=e.geometry[0].length;if(5!==f)return!1;for(var g=0;f>g;g++){var h=l.point(e.geometry[0][g],b,a.z2,a.x,a.y);if(h[0]!==-c&&h[0]!==b+c||h[1]!==-c&&h[1]!==b+c)return!1}return!0}b.exports=d;var k=a("./convert"),l=a("./transform"),m=a("./clip"),n=a("./wrap"),o=a("./tile");e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},e.prototype.splitTile=function(a,b,c,d,e,i,k){for(var l=[a,b,c,d],n=this.options,p=n.debug,q=null;l.length;){d=l.pop(),c=l.pop(),b=l.pop(),a=l.pop();var r=1<<b,s=f(b,c,d),t=this.tiles[s],u=b===n.maxZoom?0:n.tolerance/(r*n.extent);if(!t&&(p>1&&console.time("creation"),t=this.tiles[s]=o(a,r,c,d,u,b===n.maxZoom),this.tileCoords.push({z:b,x:c,y:d}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",b,c,d,t.numFeatures,t.numPoints,t.numSimplified),console.timeEnd("creation"));var v="z"+b;this.stats[v]=(this.stats[v]||0)+1,this.total++}if(t.source=a,e){if(b===n.maxZoom||b===e)continue;var w=1<<e-b;if(c!==Math.floor(i/w)||d!==Math.floor(k/w))continue}else if(b===n.indexMaxZoom||t.numPoints<=n.indexMaxPoints)continue;if(n.solidChildren||!j(t,n.extent,n.buffer)){t.source=null,p>1&&console.time("clipping");var x,y,z,A,B,C,D=.5*n.buffer/n.extent,E=.5-D,F=.5+D,G=1+D;x=y=z=A=null,B=m(a,r,c-D,c+F,0,g,t.min[0],t.max[0]),C=m(a,r,c+E,c+G,0,g,t.min[0],t.max[0]),B&&(x=m(B,r,d-D,d+F,1,h,t.min[1],t.max[1]),y=m(B,r,d+E,d+G,1,h,t.min[1],t.max[1])),C&&(z=m(C,r,d-D,d+F,1,h,t.min[1],t.max[1]),A=m(C,r,d+E,d+G,1,h,t.min[1],t.max[1])),p>1&&console.timeEnd("clipping"),x&&l.push(x,b+1,2*c,2*d),y&&l.push(y,b+1,2*c,2*d+1),z&&l.push(z,b+1,2*c+1,2*d),A&&l.push(A,b+1,2*c+1,2*d+1)}else e&&(q=b)}return q},e.prototype.getTile=function(a,b,c){var d=this.options,e=d.extent,g=d.debug,h=1<<a;b=(b%h+h)%h;var i=f(a,b,c);if(this.tiles[i])return l.tile(this.tiles[i],e);g>1&&console.log("drilling down to z%d-%d-%d",a,b,c);for(var k,m=a,n=b,o=c;!k&&m>0;)m--,n=Math.floor(n/2),o=Math.floor(o/2),k=this.tiles[f(m,n,o)];if(!k||!k.source)return null;if(g>1&&console.log("found parent tile z%d-%d-%d",m,n,o),j(k,e,d.buffer))return l.tile(k,e);g>1&&console.time("drilling down");var p=this.splitTile(k.source,m,n,o,a,b,c);if(g>1&&console.timeEnd("drilling down"),null!==p){var q=1<<a-p;i=f(p,Math.floor(b/q),Math.floor(c/q))}return this.tiles[i]?l.tile(this.tiles[i],e):null}},{"./clip":1,"./convert":2,"./tile":5,"./transform":6,"./wrap":7}],4:[function(a,b,c){"use strict";function d(a,b){var c,d,f,g,h=b*b,i=a.length,j=0,k=i-1,l=[];for(a[j][2]=1,a[k][2]=1;k;){for(d=0,c=j+1;k>c;c++)f=e(a[c],a[j],a[k]),f>d&&(g=c,d=f);d>h?(a[g][2]=d,l.push(j),l.push(g),j=g):(k=l.pop(),j=l.pop())}}function e(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1],h=a[0],i=a[1],j=f-d,k=g-e;if(0!==j||0!==k){var l=((h-d)*j+(i-e)*k)/(j*j+k*k);l>1?(d=f,e=g):l>0&&(d+=j*l,e+=k*l)}return j=h-d,k=i-e,j*j+k*k}b.exports=d},{}],5:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z2:b,transformed:!1,min:[2,1],max:[-1,0]},i=0;i<a.length;i++){h.numFeatures++,e(h,a[i],f,g);var j=a[i].min,k=a[i].max;j[0]<h.min[0]&&(h.min[0]=j[0]),j[1]<h.min[1]&&(h.min[1]=j[1]),k[0]>h.max[0]&&(h.max[0]=k[0]),k[1]>h.max[1]&&(h.max[1]=k[1])}return h}function e(a,b,c,d){var e,f,g,h,i=b.geometry,j=b.type,k=[],l=c*c;if(1===j)for(e=0;e<i.length;e++)k.push(i[e]),a.numPoints++,a.numSimplified++;else for(e=0;e<i.length;e++)if(g=i[e],d||!(2===j&&g.dist<c||3===j&&g.area<l)){var m=[];for(f=0;f<g.length;f++)h=g[f],(d||h[2]>l)&&(m.push(h),a.numSimplified++),a.numPoints++;k.push(m)}else a.numPoints+=g.length;k.length&&a.features.push({geometry:k,type:j,tags:b.tags||null})}b.exports=d},{}],6:[function(a,b,c){"use strict";function d(a,b){if(a.transformed)return a;var c,d,f,g=a.z2,h=a.x,i=a.y;for(c=0;c<a.features.length;c++){var j=a.features[c],k=j.geometry,l=j.type;if(1===l)for(d=0;d<k.length;d++)k[d]=e(k[d],b,g,h,i);else for(d=0;d<k.length;d++){var m=k[d];for(f=0;f<m.length;f++)m[f]=e(m[f],b,g,h,i)}}return a.transformed=!0,a}function e(a,b,c,d,e){var f=Math.round(b*(a[0]*c-d)),g=Math.round(b*(a[1]*c-e));return[f,g]}c.tile=d,c.point=e},{}],7:[function(a,b,c){"use strict";function d(a,b,c){var d=a,f=g(a,1,-1-b,b,0,c,-1,2),h=g(a,1,1-b,2+b,0,c,-1,2);return(f||h)&&(d=g(a,1,-b,1+b,0,c,-1,2),f&&(d=e(f,1).concat(d)),h&&(d=d.concat(e(h,-1)))),d}function e(a,b){for(var c=[],d=0;d<a.length;d++){var e,g=a[d],h=g.type;if(1===h)e=f(g.geometry,b);else{e=[];for(var i=0;i<g.geometry.length;i++)e.push(f(g.geometry[i],b))}c.push({geometry:e,type:h,tags:g.tags,min:[g.min[0]+b,g.min[1]],max:[g.max[0]+b,g.max[1]]})}return c}function f(a,b){var c=[];c.area=a.area,c.dist=a.dist;for(var d=0;d<a.length;d++)c.push([a[d][0]+b,a[d][1],a[d][2]]);return c}var g=a("./clip");b.exports=d},{"./clip":1}]},{},[3])(3)});var JsonTileImageryProvider=function(a){if(a=Cesium.defaultValue(a,Cesium.defaultValue.EMPTY_OBJECT),!Cesium.defined(a.url))throw new DeveloperError("options.url is required.");if(!Cesium.defined(a.layer))throw new DeveloperError("options.layer is required.");if(!Cesium.defined(a.style))throw new DeveloperError("options.style is required.");if(!Cesium.defined(a.tileMatrixSetID))throw new DeveloperError("options.tileMatrixSetID is required.");var b=this;this._ready=!1,this.height=512,this.width=512,this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",this.height),this.canvas.setAttribute("height",this.width),this.ctx=this.canvas.getContext("2d"),this.blank_canvas=document.createElement("canvas"),this.blank_canvas.setAttribute("width",1),this.blank_canvas.setAttribute("height",1),this._url=a.url;var c;c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.onreadystatechange=function(){if(4===c.readyState)if(200===c.status){var a=JSON.parse(c.responseText);b.tileIndex=geojsonvt(a),b._ready=!0}else 400===c.status?console.log("There was an error getting the json file (400)"):console.log("When fetching JSON file something else other than 200 was returned")},c.open("GET",a.url,!0),c.send(),this._layer=a.layer,this._style=a.style,this._tileMatrixSetID=a.tileMatrixSetID,this._tileMatrixLabels=a.tileMatrixLabels,this._format=Cesium.defaultValue(a.format,"image/jpeg"),this._proxy=a.proxy,this._tileDiscardPolicy=a.tileDiscardPolicy,this._tilingScheme=Cesium.defined(a.tilingScheme)?a.tilingScheme:new WebMercatorTilingScheme,this._tileWidth=Cesium.defaultValue(a.tileWidth,256),this._tileHeight=Cesium.defaultValue(a.tileHeight,256),this._minimumLevel=Cesium.defaultValue(a.minimumLevel,0),this._maximumLevel=Cesium.defaultValue(a.maximumLevel,18),this._rectangle=Cesium.defaultValue(a.rectangle,this._tilingScheme.rectangle);var d=this._tilingScheme.positionToTileXY(Cesium.Rectangle.southwest(this._rectangle),this._minimumLevel),e=this._tilingScheme.positionToTileXY(Cesium.Rectangle.northeast(this._rectangle),this._minimumLevel),f=(Math.abs(e.x-d.x)+1)*(Math.abs(e.y-d.y)+1);if(f>4)throw new DeveloperError("The imagery provider's rectangle and minimumLevel indicate that there are "+f+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");this._errorEvent=new Cesium.Event;var g=a.credit;this._credit="string"==typeof g?new Credit(g):g},defaultParameters=Cesium.freezeObject({service:"WMTS",version:"1.0.0",request:"GetTile"});Cesium.defineProperties(JsonTileImageryProvider.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),JsonTileImageryProvider.prototype.getTileCredits=function(a,b,c){return void 0},JsonTileImageryProvider.prototype.requestImage=function(a,b,c){if(!this._ready)throw new DeveloperError("requestImage must not be called before the imagery provider is ready.");return this.drawTile(a,b,c)},JsonTileImageryProvider.prototype.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},JsonTileImageryProvider.prototype.drawLabel=function(a,b,c,d,e,f){e||(e="center"),f||(f=50);var g=20,h=-20,i=d.x-c.x+g,j=d.y-c.y+h,k=Math.sqrt(i*i+j*j),l=k-2*f,m=b;a.measureText&&a.measureText(m).width>l&&(m="");var n=Math.atan2(j,i);if(n<-Math.PI/2||n>Math.PI/2){var o=c;c=d,d=o,i*=-1,j*=-1,n-=Math.PI}var o,p;if("center"==e)o=c,p=.5;else{var q="left"==e;o=q?c:d,p=f/k*(q?1:-1)}a.save(),a.strokeStyle="rgba(255,255,255,0.3)",a.strokeWidth=1,a.fillStyle="rgba(0,0,0,1)",a.font="40px Arial",a.textAlign=e,a.translate(o.x+i*p,o.y+j*p),a.rotate(n),a.fillText(m,0,0),a.restore()},JsonTileImageryProvider.prototype.drawTile=function(a,b,c){var d=0,e=4096*(1+2*d),f=this.height,g=f/e,h=4096*d*g,i=this.tileIndex.getTile(c,a,b);if(!i)return this.blank_canvas;this.ctx.clearRect(0,0,f,f);for(var j,k,l,m=i.features,n="black",o="rgba(0,0,0,0.05)",p=1,q=!1,r="#ffffff",s=2,t=.6,u=0;u<m.length;u++){var v=m[u],w=v.type,x=v.tags;if(x){var y=Cesium.defaultValue(x["stroke-opacity"],1),z=Cesium.defaultValue(x["fill-opacity"],.1),A=this.hexToRgb(Cesium.defaultValue(x.stroke,"#000000")),B=this.hexToRgb(Cesium.defaultValue(x.fill,"#000000"));A=Cesium.defaultValue(A,{r:0,g:0,b:0}),B=Cesium.defaultValue(B,{r:0,g:0,b:0});var C=Cesium.defaultValue(x.display,!1);j="rgba("+A.r+","+A.g+","+A.b+","+y+")",k="rgba("+B.r+","+B.g+","+B.b+","+z+")",l=Cesium.defaultValue(x["stroke-width"],1),q=Cesium.defaultValue(x.halo,!1)}else j=n,k=o,l=p;if(q){var D=this.hexToRgb(Cesium.defaultValue(x.halo,r)),E=Cesium.defaultValue(x["halo-opacity"],t),F=Cesium.defaultValue(x["halo-width"],s);this.ctx.strokeStyle="rgba("+D.r+","+D.g+","+D.b+","+E+")",this.ctx.fillStyle="rgba(0,0,0,0)",this.ctx.lineWidth=l+F,this.ctx.beginPath();for(var G=0;G<v.geometry.length;G++){var H=v.geometry[G];if(1!==w)for(var I=0;I<H.length;I++){var J=H[I];I?this.ctx.lineTo(J[0]*g+h,J[1]*g+h):this.ctx.moveTo(J[0]*g+h,J[1]*g+h)}else this.ctx.arc(H[0]*g+h,H[1]*g+h,2,0,2*Math.PI,!1)}(3===w||1===w)&&this.ctx.fill("evenodd"),this.ctx.stroke()}this.ctx.strokeStyle=j,this.ctx.fillStyle=k,this.ctx.lineWidth=l,this.ctx.beginPath();for(var K={},G=0;G<v.geometry.length;G++){var H=v.geometry[G];if(1!==w)for(var I=0;I<H.length;I++){var J=H[I];I?(K.x=H[I][0]*g+h,K.y=H[I][1]*g+h,this.ctx.lineTo(J[0]*g+h,J[1]*g+h),C&&this.drawLabel(this.ctx,C,{x:H[I][0]*g+h,y:H[I][1]*g+h},{x:H[I-1][0]*g+h,y:H[I-1][1]*g+h})):this.ctx.moveTo(J[0]*g+h,J[1]*g+h)}else this.ctx.arc(H[0]*g+h,H[1]*g+h,2,0,2*Math.PI,!1)}(3===w||1===w)&&this.ctx.fill("evenodd"),this.ctx.stroke()}return this.canvas},JsonTileImageryProvider.prototype.pickFeatures=function(){return void 0};var LZString=function(){function a(a,b){if(!e[a]){e[a]={};for(var c=0;c<a.length;c++)e[a][a.charAt(c)]=c}return e[a][b]}var b=String.fromCharCode,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={},f={compressToBase64:function(a){if(null==a)return"";var b=f._compress(a,6,function(a){return c.charAt(a)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:f._decompress(b.length,32,function(d){return a(c,b.charAt(d))})},compressToUTF16:function(a){return null==a?"":f._compress(a,15,function(a){return b(a+32)})+" "},decompressFromUTF16:function(a){return null==a?"":""==a?null:f._decompress(a.length,16384,function(b){return a.charCodeAt(b)-32})},compressToUint8Array:function(a){for(var b=f.compress(a),c=new Uint8Array(2*b.length),d=0,e=b.length;e>d;d++){var g=b.charCodeAt(d);c[2*d]=g>>>8,c[2*d+1]=g%256}return c},decompressFromUint8Array:function(a){if(null===a||void 0===a)return f.decompress(a);for(var c=new Array(a.length/2),d=0,e=c.length;e>d;d++)c[d]=256*a[2*d]+a[2*d+1];var g=[];return c.forEach(function(a){g.push(b(a))}),f.decompress(g.join(""))},compressToEncodedURIComponent:function(a){return null==a?"":f._compress(a,6,function(a){return d.charAt(a)})},decompressFromEncodedURIComponent:function(b){return null==b?"":""==b?null:(b=b.replace(/ /g,"+"),f._decompress(b.length,32,function(c){return a(d,b.charAt(c))}))},compress:function(a){return f._compress(a,16,function(a){return b(a)})},_compress:function(a,b,c){if(null==a)return"";var d,e,f,g={},h={},i="",j="",k="",l=2,m=3,n=2,o=[],p=0,q=0;for(f=0;f<a.length;f+=1)if(i=a.charAt(f),Object.prototype.hasOwnProperty.call(g,i)||(g[i]=m++,h[i]=!0),j=k+i,Object.prototype.hasOwnProperty.call(g,j))k=j;else{if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;n>d;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;8>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;n>d;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;16>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++),g[j]=m++,k=String(i)}if(""!==k){if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;n>d;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;8>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;n>d;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;16>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++)}for(e=2,d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;for(;;){if(p<<=1,q==b-1){o.push(c(p));break}q++}return o.join("")},decompress:function(a){return null==a?"":""==a?null:f._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(a,c,d){var e,f,g,h,i,j,k,l,m=[],n=4,o=4,p=3,q="",r=[],s={val:d(0),position:c,index:1};for(f=0;3>f;f+=1)m[f]=f;for(h=0,j=Math.pow(2,2),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;switch(e=h){case 0:for(h=0,j=Math.pow(2,8),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;l=b(h);break;case 1:for(h=0,j=Math.pow(2,16),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;l=b(h);break;case 2:return""}for(m[3]=l,g=l,r.push(l);;){if(s.index>a)return"";for(h=0,j=Math.pow(2,p),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;switch(l=h){case 0:for(h=0,j=Math.pow(2,8),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;m[o++]=b(h),l=o-1,n--;break;case 1:for(h=0,j=Math.pow(2,16),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;m[o++]=b(h),l=o-1,n--;break;case 2:return r.join("")}if(0==n&&(n=Math.pow(2,p),p++),m[l])q=m[l];else{if(l!==o)return null;q=g+g.charAt(0)}r.push(q),m[o++]=g+q.charAt(0),n--,g=q,0==n&&(n=Math.pow(2,p),p++)}}};return f}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),!function(a,b,c){"use strict";function d(a){var b=null;if("VIDEO"===a.tagName)b=a;else{var c=a.getElementsByTagName("video");c[0]&&(b=c[0])}return b}function e(a){var b=d(a);if(b&&b.webkitEnterFullscreen){try{b.readyState<b.HAVE_METADATA?(b.addEventListener("loadedmetadata",function e(){b.removeEventListener("loadedmetadata",e,!1),b.webkitEnterFullscreen(),l=!!b.getAttribute("controls")},!1),b.load()):(b.webkitEnterFullscreen(),l=!!b.getAttribute("controls")),k=b}catch(c){return r("not_supported",a)}return!0}return r(void 0===j.request?"not_supported":"not_enabled",a)}function f(){s.element||(q(),h())}function g(){c&&"webkitfullscreenchange"===j.change&&window.addEventListener("resize",f,!1)}function h(){c&&"webkitfullscreenchange"===j.change&&window.removeEventListener("resize",f,!1)}var i=/i(Pad|Phone|Pod)/.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/^.*OS (\d+)_(\d+).*$/,"$1.$2"),10)>=7,j=function(){var a=b.createElement("video"),c={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},d={};for(var e in c)for(var f=0,g=c[e].length;g>f;f++)if(c[e][f]in a||c[e][f]in b||"on"+c[e][f].toLowerCase()in b){d[e]=c[e][f];break}return d}(),k=null,l=null,m=function(){},n=[],o=!1;navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Chrome")>-1&&(o=parseInt(navigator.userAgent.replace(/^.*Chrome\/(\d+).*$/,"$1"),10)||!0);var p=function(a){var b=n[n.length-1];b&&(a!==b.element&&a!==k||!b.hasEntered)&&("VIDEO"===a.tagName&&(k=a),1===n.length&&s.onenter(s.element),b.enter.call(b.element,a||b.element),b.hasEntered=!0)},q=function(){!k||l||i||(k.setAttribute("controls","controls"),k.removeAttribute("controls")),k=null,l=null;var a=n.pop();a&&(a.exit.call(a.element),s.element||(n.forEach(function(a){a.exit.call(a.element)}),n=[],s.onexit()))},r=function(a,b){if(n.length>0){var c=n.pop();b=b||c.element,c.error.call(b,a),s.onerror(b,a)}},s={request:function(a,d,f,g){if(a=a||b.body,n.push({element:a,enter:d||m,exit:f||m,error:g||m}),void 0===j.request)return void e(a);if(c&&b[j.enabled]===!1)return void e(a);if(o!==!1&&32>o)return void e(a);if(c&&void 0===j.enabled)return j.enabled="webkitFullscreenEnabled",a[j.request](),void setTimeout(function(){b[j.element]?b[j.enabled]=!0:(b[j.enabled]=!1,e(a))},250);try{a[j.request](),setTimeout(function(){b[j.element]||r(c?"not_enabled":"not_allowed",a)},100)}catch(h){r("not_enabled",a)}},exit:function(){h(),b[j.exit]()},toggle:function(a,b,c,d){s.element?s.exit():s.request(a,b,c,d)},videoEnabled:function(a){if(s.enabled)return!0;a=a||b.body;var c=d(a);return c&&void 0!==c.webkitSupportsFullscreen?c.readyState<c.HAVE_METADATA?"maybe":c.webkitSupportsFullscreen:!1},onenter:m,onexit:m,onchange:m,onerror:m};try{Object.defineProperties(s,{element:{enumerable:!0,get:function(){return k&&k.webkitDisplayingFullscreen?k:b[j.element]||null}},enabled:{enumerable:!0,get:function(){return"webkitCancelFullScreen"!==j.exit||c?o!==!1&&32>o?!1:b[j.enabled]||!1:!0}}}),j.change&&b.addEventListener(j.change,function(a){if(s.onchange(s.element),s.element){var b=n[n.length-2];b&&b.element===s.element?q():(p(s.element),g())}else q()},!1),b.addEventListener("webkitbeginfullscreen",function(a){var b=!0;if(n.length>0)for(var c=0,e=n.length;e>c;c++){var f=d(n[c].element);if(f===a.srcElement){b=!1;break}}b&&n.push({element:a.srcElement,enter:m,exit:m,error:m}),s.onchange(a.srcElement),p(a.srcElement)},!0),b.addEventListener("webkitendfullscreen",function(a){s.onchange(a.srcElement),q(a.srcElement)},!0),j.error&&b.addEventListener(j.error,function(a){r("not_allowed")},!1)}catch(t){s.element=null,s.enabled=!1}"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:a.BigScreen=s}(this,document,self!==top);